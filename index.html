<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Proposta de Fim de Semana Rom√¢ntico ‚Äî Castrolanda</title>
<meta name="description" content="Proposta rom√¢ntica de fim de semana em Castrolanda (Castro-PR) ‚Äî sa√≠da 31/10 ap√≥s o trabalho e retorno 02/11." />
<style>
  :root{
    --bg:#0b1020; --panel:#11162a; --ink:#eef2ff; --muted:#b8c1ec;
    --brand:#7c3aed; --brand-ink:#c4b5fd; --ok:#16a34a; --no:#ef4444;
    --border:rgba(255,255,255,.08); --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
    --focus:#22d3ee;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif;
    color:var(--ink); background:
      radial-gradient(1200px 800px at 80% -10%, #1e293b 0, rgba(30,41,59,0) 60%),
      radial-gradient(900px 700px at 10% -10%, #0ea5e9 0, rgba(14,165,233,0) 50%),
      linear-gradient(180deg, #0b1020 0%, #0b1020 100%);
  }
  .wrap{max-width:980px; margin:40px auto; padding:24px;}
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid var(--border); border-radius:var(--radius); box-shadow:var(--shadow);
    backdrop-filter: blur(8px);
  }
  .pad{padding:28px}
  h1{margin:0 0 6px;font-size: clamp(26px, 3.2vw, 40px); letter-spacing:.2px}
  h2{margin:18px 0 8px;font-size: clamp(18px, 2.2vw, 24px); color:var(--brand-ink)}
  p,li{color:var(--muted); line-height:1.6}
  .muted{color:var(--muted)}
  .grid{display:grid; gap:18px}
  @media(min-width:800px){ .grid-2{grid-template-columns:1.2fr .8fr} }
  .input, .btn{
    border-radius:14px; border:1px solid var(--border); padding:14px 16px; background:#0f1430;
    color:var(--ink); outline:none; width:100%;
  }
  .input:focus{border-color:var(--focus); box-shadow:0 0 0 3px rgba(34,211,238,.25)}
  .btn{
    display:inline-flex; gap:10px; align-items:center; justify-content:center; cursor:pointer;
    background:linear-gradient(180deg, #1e1b4b, #111827);
    transition:transform .08s ease, box-shadow .2s ease, background .2s ease;
    user-select:none; -webkit-user-select:none;
  }
  .btn:hover{transform:translateY(-1px); box-shadow:0 8px 20px rgba(0,0,0,.35)}
  .btn.primary{background:linear-gradient(180deg, #7c3aed, #4c1d95); border-color:#5b21b6}
  .btn.ok{background:linear-gradient(180deg, #16a34a, #065f46); border-color:#10b981}
  .btn.no{background:linear-gradient(180deg, #ef4444, #7f1d1d); border-color:#f87171; position:relative}
  .btn.ghost{background:transparent}
  .row{display:flex; gap:12px; flex-wrap:wrap}
  .fx-right{display:flex; justify-content:flex-end; gap:10px}
  .cta{margin-top:14px}
  .stepper{display:flex; gap:6px; flex-wrap:wrap; margin-bottom:16px}
  .dot{
    width:12px; height:12px; border-radius:50%; background:rgba(255,255,255,.2);
    border:1px solid var(--border)
  }
  .dot.active{background:var(--brand); box-shadow:0 0 0 3px rgba(124,58,237,.35)}
  .hero{
    border-radius:16px; overflow:hidden; border:1px solid var(--border);
    background:radial-gradient(120% 120% at 10% 0%, rgba(124,58,237,.25), rgba(0,0,0,0) 60%);
    padding:18px;
  }
  .tag{display:inline-block; padding:6px 10px; border:1px solid var(--border); border-radius:999px; color:var(--brand-ink)}
  .photos{display:grid; gap:12px; grid-template-columns:repeat(1,1fr)}
  @media(min-width:700px){ .photos{grid-template-columns:repeat(2,1fr)} }
  @media(min-width:1000px){ .photos{grid-template-columns:repeat(3,1fr)} }
  figure{
    border:1px solid var(--border); border-radius:14px; overflow:hidden; background:#0b1020; margin:0;
    display:flex; flex-direction:column
  }
  figure img{width:100%; height:240px; object-fit:cover; display:block}
  figcaption{padding:10px 12px; font-size:13px; color:#cbd5e1; background:rgba(255,255,255,.03)}
  .okstamp{
    display:inline-flex; align-items:center; gap:10px; padding:12px 14px;
    border:1px dashed rgba(34,197,94,.45); border-radius:12px; color:#bbf7d0; background:rgba(16,185,129,.08)
  }
  .foot{margin-top:24px; font-size:12px; color:#94a3b8}

  /* PRINT */
  @media print{
    body{background:#fff; color:#000}
    .wrap{max-width:none; margin:0; padding:0}
    .card{border:none; box-shadow:none; background:#fff}
    .btn, .stepper, #loginCard{display:none !important}
    .foot{color:#000}
    a{color:#000; text-decoration:none}
  }
</style>
</head>
<body>

<div class="wrap">
  <!-- LOGIN CARD -->
  <div id="loginCard" class="card pad">
    <h1>üîí Proposta de Fim de Semana Rom√¢ntico</h1>
    <p class="muted">Acesso restrito ao destinat√°rio. Informe a senha para visualizar a proposta.</p>
    <div class="grid grid-2">
      <div>
        <h2>Dados de acesso</h2>
        <label class="muted" for="pwd">Senha</label>
        <input id="pwd" class="input" type="password" placeholder="Digite a senha‚Ä¶" autocomplete="current-password" />
        <div class="row cta" style="justify-content:flex-start">
          <button class="btn primary" id="enterBtn">Entrar</button>
          <button class="btn ghost" id="showHint">Dica</button>
        </div>
        <p id="hint" class="muted" style="display:none">Dica: data especial ‚Äî <strong>10012004</strong> (formato DDMMYYYY).</p>
        <p id="loginMsg" style="color:#fecaca"></p>
      </div>
      <div class="hero">
        <span class="tag">Castrolanda ‚Ä¢ Castro-PR</span>
        <h2 style="margin-top:8px">31/10 (sexta, ap√≥s o trabalho) ‚Üí 02/11 (domingo)</h2>
        <ul>
          <li><strong>Sa√≠da:</strong> Curitiba, sexta 31/10, fim da tarde.</li>
          <li><strong>Destino:</strong> Col√¥nia Castrolanda (moinho ‚ÄúDe Immigrant‚Äù, museu, gastronomia holandesa).</li>
          <li><strong>Retorno:</strong> domingo 02/11, in√≠cio da tarde/noite.</li>
        </ul>
        <p class="muted">Depois de acessar, avance pelas abas e confirme no final. üíú</p>
      </div>
    </div>
  </div>

  <!-- WIZARD CARD -->
  <div id="wizardCard" class="card pad" style="display:none" aria-live="polite">
    <div class="stepper" id="dots" role="tablist" aria-label="Etapas da proposta"></div>
    <div id="stepWrap"></div>
    <div class="row cta">
      <button class="btn" id="prevBtn" aria-label="Etapa anterior">‚Üê Anterior</button>
      <div class="fx-right" style="flex:1">
        <button class="btn primary" id="nextBtn" aria-label="Pr√≥xima etapa">Pr√≥ximo ‚Üí</button>
      </div>
    </div>
    <div class="row cta" style="justify-content:space-between">
      <button class="btn" id="saveBtn">üíæ Salvar proposta (imprimir/baixar)</button>
      <div></div>
    </div>
    <div class="foot">Proposta preparada por <strong>Leonardo</strong> para <strong>Gabriel</strong> ‚Äî vers√£o 31/10 ‚Üí 02/11.</div>
  </div>
</div>

<script>
  // =========================
  // Configura√ß√£o
  // =========================
  const PASSWORD = "10012004";

  const steps = [
    {
      title: "Apresenta√ß√£o",
      html: `
        <h1>Fim de Semana Rom√¢ntico: Castrolanda</h1>
        <p>Convite para uma escapada a dois com charme europeu nos Campos Gerais. Arquitetura holandesa, gastronomia acolhedora e um moinho ic√¥nico para fotos de capa de √°lbum. üí´</p>
        <div class="grid grid-2">
          <div>
            <h2>Quando</h2>
            <p><strong>Sa√≠da:</strong> sexta-feira, <strong>31/10</strong>, direto ap√≥s o trabalho (estimado 17h‚Äì18h).<br>
               <strong>Retorno:</strong> domingo, <strong>02/11</strong>, in√≠cio da tarde/noite.</p>
            <h2>Onde</h2>
            <p><strong>Col√¥nia Castrolanda</strong> (Castro-PR) ‚Äî moinho ‚ÄúDe Immigrant‚Äù, Centro Cultural e clima buc√≥lico.</p>
          </div>
          <div>
            <div class="okstamp">üåô Clima da viagem: intimista, rom√¢ntico, sem pressa.</div>
            <p style="margin-top:10px">Objetivo: descanso com estilo, boas conversas e fotos lindas.</p>
          </div>
        </div>
      `
    },
    {
      title: "Roteiro",
      html: `
        <h2>Roteiro sugerido</h2>
        <ul>
          <li><strong>Sexta (31/10):</strong> sa√≠da de Curitiba; check-in; jantar aconchegante; passeio noturno breve pela col√¥nia.</li>
          <li><strong>S√°bado (01/11):</strong> caf√© da manh√£; visita ao <em>Centro Cultural Castrolanda</em> (moinho + museu); pausa para doces t√≠picos; tarde leve; p√¥r do sol fotogr√°fico.</li>
          <li><strong>Domingo (02/11):</strong> manh√£ tranquila; caf√© com vista; almo√ßo cedo; retorno com calma.</li>
        </ul>
        <p class="muted">Obs.: hor√°rios flex√≠veis ‚Äî a ideia √© curtir sem correria.</p>
      `
    },
    {
      title: "Hospedagem",
      html: `
        <h2>Hospedagem sugerida</h2>
        <p>Escolher uma pousada ou hotel em <strong>Castrolanda/Castro</strong> com boa avalia√ß√£o e quarto silencioso. Prefer√™ncias:</p>
        <ul>
          <li>Quarto com cama queen/king e bom chuveiro;</li>
          <li>Caf√© da manh√£ caprichado (op√ß√£o com waffle/torta holandesa √© um plus);</li>
          <li>Estacionamento no local.</li>
        </ul>
        <p class="muted">Reservas reembols√°veis s√£o recomendadas. Voc√™ pode substituir por op√ß√µes de sua prefer√™ncia.</p>
      `
    },
    {
      title: "Gastronomia",
      html: `
        <h2>Gastronomia & momentos</h2>
        <ul>
          <li>Jantar de sexta: culin√°ria local com ambiente acolhedor (massa, truta, ou comida t√≠pica).</li>
          <li>S√°bado: caf√© com doces holandeses; almo√ßo leve; jantar com vinho/suco de uva.</li>
          <li>Domingo: brunch simples e despedida do moinho.</li>
        </ul>
        <p>Levar: casaco leve (noite pode esfriar), c√¢mera/telefone com mem√≥ria livre e disposi√ß√£o para fotos.</p>
      `
    },
    {
      title: "Fotos",
      html: `
        <h2>√Ålbum de refer√™ncias do fim de semana</h2>
        <div class="photos">
          <figure>
            <img src="img/01.jpg" alt="Moinho De Immigrant e Centro Cultural, Castrolanda" />
            <figcaption>Moinho ‚ÄúDe Immigrant‚Äù e o Centro Cultural ‚Äî cart√£o-postal de Castrolanda.</figcaption>
          </figure>
          <figure>
            <img src="img/02.jpg" alt="P√¥r do sol na estrada saindo de Curitiba" />
            <figcaption>P√¥r do sol na estrada ‚Äî sa√≠da de Curitiba rumo aos Campos Gerais.</figcaption>
          </figure>
          <figure>
            <img src="img/03.jpg" alt="Vista a√©rea da Col√¥nia Castrolanda" />
            <figcaption>Vista a√©rea da Col√¥nia Castrolanda ‚Äî charme europeu no interior do Paran√°.</figcaption>
          </figure>
          <figure>
            <img src="img/04.jpg" alt="Restaurante Casantiga no centro hist√≥rico de Castro" />
            <figcaption>Restaurante Casantiga, no centro hist√≥rico de Castro ‚Äî clima simples e saboroso.</figcaption>
          </figure>
          <figure>
            <img src="img/05.jpeg" alt="Leonardo e Gabriel em viagem anterior" />
            <figcaption>Leonardo & Gabriel ‚Äî registro de uma viagem anterior (o clima que queremos repetir!).</figcaption>
          </figure>
          <figure>
            <img src="img/06.jpg" alt="Ponte e lago ao entardecer em Castro" />
            <figcaption>Entardecer em Castro ‚Äî passeio leve antes do retorno.</figcaption>
          </figure>
        </div>
        <p class="muted" style="margin-top:10px">Depois trocamos/ acrescentamos as fotos que fizermos l√° ‚ú®.</p>
      `
    },
    {
      title: "Confirma√ß√£o",
      html: `
        <h2>Posso reservar?</h2>
        <p>Se voc√™ curtiu, clique em <strong>ACEITO</strong>. Se n√£o, <strong>N√£o aceito</strong>‚Ä¶ (mas esse bot√£o tem vontade pr√≥pria üòâ).</p>
        <div class="row">
          <button class="btn ok" id="acceptBtn">‚úÖ ACEITO</button>
          <button class="btn no" id="declineBtn">‚ùå N√ÉO ACEITO</button>
        </div>
        <p id="result" class="muted" style="margin-top:12px;"></p>
      `
    }
  ];

  // =========================
  // Login
  // =========================
  const loginCard = document.getElementById('loginCard');
  const wizardCard = document.getElementById('wizardCard');
  const pwd = document.getElementById('pwd');
  const enterBtn = document.getElementById('enterBtn');
  const showHint = document.getElementById('showHint');
  const hint = document.getElementById('hint');
  const loginMsg = document.getElementById('loginMsg');

  showHint.addEventListener('click', ()=> hint.style.display = (hint.style.display==='none'?'block':'none'));

  function doLogin(){
    if((pwd.value||"").trim() === PASSWORD){
      loginMsg.textContent = "";
      loginCard.style.display = 'none';
      wizardCard.style.display = 'block';
      renderWizard();
      window.scrollTo({top:0, behavior:'smooth'});
    }else{
      loginMsg.textContent = "Senha incorreta. Tente novamente.";
      pwd.focus();
    }
  }
  enterBtn.addEventListener('click', doLogin);
  pwd.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') doLogin(); });

  // =========================
  // Wizard
  // =========================
  let stepIndex = 0;
  const stepWrap = document.getElementById('stepWrap');
  const prevBtn = document.getElementById('prevBtn');
  const nextBtn = document.getElementById('nextBtn');
  const dots = document.getElementById('dots');
  const saveBtn = document.getElementById('saveBtn');

  function renderDots(){
    dots.innerHTML = "";
    steps.forEach((_,i)=>{
      const d = document.createElement('div');
      d.className = 'dot' + (i===stepIndex ? ' active' : '');
      d.setAttribute('role','tab');
      d.setAttribute('aria-selected', i===stepIndex ? 'true':'false');
      d.title = steps[i].title;
      d.addEventListener('click', ()=>{ stepIndex=i; renderStep(); });
      dots.appendChild(d);
    });
  }

  function renderStep(){
    renderDots();
    const s = steps[stepIndex];
    stepWrap.innerHTML = `
      <div>
        <h2 style="margin-top:0">${s.title}</h2>
        ${s.html}
      </div>
    `;

    prevBtn.disabled = stepIndex===0;
    // >>> Remove "Concluir": esconde o bot√£o Pr√≥ximo na √∫ltima etapa <<<
    nextBtn.style.display = (stepIndex === steps.length-1) ? 'none' : 'inline-flex';

    // etapa final: ligar bot√µes especiais
    if(stepIndex === steps.length-1){
      const acceptBtn = document.getElementById('acceptBtn');
      const declineBtn = document.getElementById('declineBtn');
      const result = document.getElementById('result');

      acceptBtn?.addEventListener('click', ()=>{
        const stamp = new Date().toLocaleString('pt-BR');
        result.innerHTML = "üíú <strong>ACEITO!</strong> ("+stamp+")<br>üì∏ <strong>Tire uma foto desta mensagem e envie para o Leonardo para confirmar.</strong>";
        localStorage.setItem('proposta_castrolanda_resposta', JSON.stringify({resposta:'ACEITO', quando: stamp}));
      });

      // Bot√£o ‚ÄúN√£o aceito‚Äù que foge do mouse
      let escapeCount = 0;
      function moveButtonAway(e){
        const btn = declineBtn;
        const rect = btn.getBoundingClientRect();
        const wrapRect = wizardCard.getBoundingClientRect();
        const pad = 20;
        const maxLeft = wrapRect.width - rect.width - pad;
        const maxTop = wrapRect.height - rect.height - 140;
        const left = Math.max(pad, Math.min(maxLeft, Math.random()*maxLeft));
        const top  = Math.max(pad, Math.min(maxTop, Math.random()*maxTop));
        btn.style.position = 'absolute';
        btn.style.left = left + 'px';
        btn.style.top  = top + 'px';
        escapeCount++;
        if(escapeCount>6){ btn.textContent = "üòÖ Tenta me pegar!"; }
      }
      function proximityHandler(e){
        const btn = declineBtn;
        const rect = btn.getBoundingClientRect();
        const radius = 120;
        const dx = (e.clientX - (rect.left + rect.width/2));
        const dy = (e.clientY - (rect.top  + rect.height/2));
        const dist = Math.hypot(dx,dy);
        if(dist < radius){ moveButtonAway(e); }
      }
      wizardCard.addEventListener('mousemove', proximityHandler);
      declineBtn?.addEventListener('mouseenter', moveButtonAway);
      declineBtn?.addEventListener('click', (ev)=>{ ev.preventDefault(); moveButtonAway(ev); });
    }
  }

  function renderWizard(){ renderStep(); }
  prevBtn.addEventListener('click', ()=>{ if(stepIndex>0){ stepIndex--; renderStep(); }});
  nextBtn.addEventListener('click', ()=>{ if(stepIndex < steps.length-1){ stepIndex++; renderStep(); }});

  // =========================
  // Salvar proposta (imprimir + baixar .html)
  // =========================
  function buildReportHTML(){
    const content = steps.map((s,i)=>`
      <section style="margin:0 0 18px 0">
        <h2 style="margin:0 0 8px 0; font:600 18px/1.3 system-ui">#${i+1} ‚Äî ${s.title}</h2>
        <div>${s.html}</div>
      </section>
    `).join("\n");

    return `<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<title>Relat√≥rio ‚Äî Proposta Castrolanda (31-10 a 02-11)</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body{font-family: system-ui,Segoe UI,Roboto,Arial; margin:24px; color:#111}
  h1{margin:0 0 6px 0}
  h2{color:#333}
  .muted{color:#444}
  figure{border:1px solid #ddd; border-radius:10px; overflow:hidden; background:#fff}
  figure img{width:100%; height:240px; object-fit:cover; display:block}
  figcaption{padding:8px 10px; font-size:13px; color:#333; background:#fafafa}
  .stamp{margin:12px 0; padding:10px 12px; border:1px dashed #999; border-radius:8px; background:#fafafa}
  @media print{a{text-decoration:none; color:#000}}
</style>
</head>
<body>
  <h1>Relat√≥rio ‚Äî Proposta de Fim de Semana Rom√¢ntico</h1>
  <div class="muted">Castrolanda/PR ‚Ä¢ Sa√≠da 31/10 (ap√≥s o trabalho) ‚Ä¢ Retorno 02/11</div>
  <div class="stamp">Gerado em ${new Date().toLocaleString('pt-BR')}</div>
  ${content}
  <hr style="margin:24px 0; border:none; border-top:1px solid #ddd" />
  <div class="muted">Preparado por Leonardo para Gabriel. Resultado: ${
    (JSON.parse(localStorage.getItem('proposta_castrolanda_resposta')||'{}').resposta)||'pendente'
  }.</div>
</body>
</html>`;
  }

  function saveProposal(){
    // 1) Abrir relat√≥rio para impress√£o
    const reportHTML = buildReportHTML();
    const w = window.open('', '_blank');
    w.document.open();
    w.document.write(reportHTML);
    w.document.close();
    w.onload = () => w.print();

    // 2) Baixar .html com o conte√∫do
    const blob = new Blob([reportHTML], {type:'text/html;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    const stamp = new Date().toISOString().slice(0,19).replace(/[T:]/g,'-');
    a.href = url;
    a.download = `proposta-castrolanda-relatorio-${stamp}.html`;
    document.body.appendChild(a);
    a.click();
    setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 1000);
  }
  saveBtn.addEventListener('click', saveProposal);

  // Acessibilidade: foco inicial no campo de senha
  window.addEventListener('load', ()=> { pwd.focus(); });
</script>
</body>
</html>
